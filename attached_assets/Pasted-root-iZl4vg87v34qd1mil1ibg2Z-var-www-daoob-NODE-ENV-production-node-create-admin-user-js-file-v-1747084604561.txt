root@iZl4vg87v34qd1mil1ibg2Z:/var/www/daoob# NODE_ENV=production node create-admin-user.js
file:///var/www/daoob/create-admin-user.js:1
const { Pool } = require('@neondatabase/serverless');
                 ^

ReferenceError: require is not defined in ES module scope, you can use import instead
This file is being treated as an ES module because it has a '.js' file extension and '/var/www/daoob/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///var/www/daoob/create-admin-user.js:1:18
    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:337:24)
    at async loadESM (node:internal/process/esm_loader:34:7)
    at async handleMainPromise (node:internal/modules/run_main:106:12)

Node.js v18.20.8
root@iZl4vg87v34qd1mil1ibg2Z:/var/www/daoob# # List JavaScript files in the root directory
ls -la *.js
-rw-r--r-- 1 root root 2151 May 13 05:15 create-admin-user.js
-rw-r--r-- 1 root root  251 May 13 04:49 ecosystem.config.js
-rw-r--r-- 1 root root   80 May 13 04:46 postcss.config.js
root@iZl4vg87v34qd1mil1ibg2Z:/var/www/daoob# # Create SQL script to insert admin user
cat > create-admin.sql << EOF
-- Insert admin user with hashed password ('password')
INSERT INTO users (username, password, email, full_name, user_type, created_at) 
VALUES ('admin', '5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8.salt', 'admin@example.com', 'Admin User', 'admin', NOW())
ON CONFLICT (username) DO NOTHING;

-- Get the ID of the admin user
DO \$\$
DECLARE
    admin_id integer;
BEGIN
    SELECT id INTO admin_id FROM users WHERE username = 'admin';
    
    -- Insert admin permissions
    INSERT INTO admin_permissions (user_id, permission, granted, created_at, updated_at)
    VALUES 
        (admin_id, 'manage_event_types', true, NOW(), NOW()),
        (admin_id, 'view_event_requests', true, NOW(), NOW()),
        (admin_id, 'manage_event_requests', true, NOW(), NOW()),
        (admin_id, 'view_quotations', true, NOW(), NOW()),
        (admin_id, 'manage_quotations', true, NOW(), NOW());
END \$\$;
EOF

# Run the SQL script
sudo -u postgres psql daoob < create-admin.sql
psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  database "daoob" does not exist
